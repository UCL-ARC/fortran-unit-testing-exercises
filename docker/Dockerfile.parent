FROM ubuntu:rolling
RUN apt update
RUN apt upgrade -y
RUN DEBIAN_FRONTEND=noninteractive apt install -y gfortran-14 git wget valgrind cmake python3 m4
RUN update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-14 100 --slave /usr/bin/gfortran gfortran /usr/bin/gfortran-14
RUN wget -O /usr/bin/fpm https://github.com/fortran-lang/fpm/releases/download/v0.10.1/fpm-0.10.1-linux-x86_64 && chmod 555 /usr/bin/fpm
RUN apt update && apt install -y locales && rm -rf /var/lib/apt/lists/* && localedef -i en_US -c -f UTF-8 -A /usr/share/locale/locale.alias en_US.UTF-8

#Â Build pfunit
COPY scripts/build-pfunit.sh /solution/build-pfunit.sh
RUN ./solution/build-pfunit.sh -b -p /pfunit
